Ext.ns("Ext.ux");Ext.ux.MessageSlider=Ext.extend(Ext.util.Observable,{items:[],renderTo:document.body,displayIndex:0,intervalTime:4,msgContainerCls:"ux-msg-slider-container",msgInnerCls:"ux-msg-slider-inner",msgOverCls:"ux-msg-slider-over",constructor:function(a){Ext.apply(this,a);Ext.ux.MessageSlider.superclass.constructor.call(this);this.addEvents("change");this.init()},init:function(){this.el=Ext.get(this.renderTo);this.activeItem=this.items[this.displayIndex];this.initMarkup();this.initEvents()},initMarkup:function(){this.containerEl=this.el.createChild({tag:"div",cls:this.msgContainerCls});this.innerEl=this.containerEl.createChild({tag:"div",cls:this.msgInnerCls});var b=this.activeItem,a=b.content||b.text;this.innerEl.createChild({tag:"a",href:b.url||"#",html:a,title:b.tip||a,target:b.target||"_blank"})},initEvents:function(){var a=this.msgOverCls;this.innerEl.hover(function(){Ext.fly(this).addClass(a)},function(){Ext.fly(this).removeClass(a)});this.containerEl.on("click",function(c,b){if(b.href.slice(-1)=="#"){c.preventDefault()}this.fireEvent("change",this.activeItem,this.displayIndex)},this,{delegate:"a"});this.showMsg(this.displayIndex);window.setInterval(function(){if(!this.innerEl.hasClass(a)){this.displayIndex=this.items[this.displayIndex+1]?this.displayIndex+1:0;this.showMsg(this.displayIndex)}}.createDelegate(this),this.intervalTime*1000)},showMsg:function(a){if(!this.innerEl.hasClass(this.msgOverCls)){this.displayIndex=a;this.activeItem=this.items[a];if(this.containerEl.isVisible()){this.containerEl.slideOut("b",{callback:this.updateMsg,scope:this})}else{this.updateMsg()}}},updateMsg:function(){var b=this.activeItem,c=this.innerEl.child("a"),a=b.content||b.text;c.update(a);c.dom.href=b.url||"#";c.dom.title=b.tip||a;c.dom.target=b.target||"_blank";this.containerEl.slideIn("b",{duration:0.2})}});